{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<style>
    .section-title {
        font-size: 20px;
        font-weight: 700;
        margin-top: 25px;
        margin-bottom: 10px;
        color: #1f2937;
    }

    .doc-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 18px;
        margin-top: 12px;
    }

    .doc-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        transition: 0.15s ease-in-out;
    }

    .doc-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 18px rgba(0,0,0,0.10);
    }

    .doc-title {
        font-size: 17px;
        font-weight: 700;
        color: #111827;
        margin-bottom: 6px;
    }

    .doc-desc {
        font-size: 14px;
        color: #6b7280;
        min-height: 40px;
        margin-bottom: 10px;
    }

    .pill {
        padding: 5px 12px;
        border-radius: 30px;
        font-size: 13px;
        font-weight: 700;
        display: inline-block;
    }
    .pill.draft { background: #f1f5f9; color: #1e293b; }
    .pill.submitted { background: #e0e7ff; color: #3730a3; }
    .pill.approved { background: #dcfce7; color: #166534; }
    .pill.rejected { background: #fee2e2; color: #991b1b; }

    .btn-view {
        background: #2563eb;
        color: white;
        text-decoration: none;
        padding: 9px 14px;
        border-radius: 8px;
        font-weight: 600;
        float: right;
        transition: background 0.2s;
    }

    .btn-view:hover {
        background: #1e40af;
    }
</style>


<h2 class="section-title">My Documents</h2>

{% if my_documents %}
<div class="doc-grid">
    {% for doc in my_documents %}
    <div class="doc-card">

        <div class="doc-title">{{ doc.title }}</div>

        <div class="doc-desc">{{ doc.description|default:"No description" }}</div>

        <span class="pill {{ doc.status }}">
            {{ doc.status|title }}
        </span>

        <br><br>

        <a href="{% url 'document_detail' doc.id %}" class="btn-view">View</a>

    </div>
    {% endfor %}
</div>
{% else %}
<p style="color:#6b7280; font-size:15px;">You have not created any documents yet.</p>
{% endif %}



<h2 class="section-title">My Tasks (Approval Needed)</h2>

{% if my_tasks %}
<div class="doc-grid">
    {% for doc in my_tasks %}
    <div class="doc-card">

        <div class="doc-title">{{ doc.title }}</div>

        <div class="doc-desc">{{ doc.description|default:"No description" }}</div>

        <span class="pill submitted">Pending Approval</span>

        <br><br>

        <a href="{% url 'document_detail' doc.id %}" class="btn-view">Review</a>

    </div>
    {% endfor %}
</div>
{% else %}
<p style="color:#6b7280; font-size:15px;">No approval tasks assigned to you.</p>
{% endif %}

{% endblock %}